/* 
 * mdtoc.js v0.0.2
 * (c) 2018 Pwcong <pwcong@foxmail.com>
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.mdtoc=t()}(this,function(){"use strict";var n={name:"mdtoc",prefix:"",filter:["h1","h2","h3","h4","h5","h6"]},i=function(e,t){if(this.done=!1,this.selector=e,this.md=null,"[object String]"===Object.prototype.toString.call(e)?this.md=document.querySelector(e):e instanceof HTMLElement&&(this.md=e),!this.md)throw new Error("invalid selector");this.options=Object.assign({},n,t),this.tocTree={heading:0,name:this.options.name,children:[]},this.init()};return i.prototype={init:function(){for(var t=this,e=Array.prototype.filter.call(this.md.childNodes||[],function(e){return e instanceof HTMLHeadingElement&&0<=(t.options.filter||[]).indexOf(e.tagName.toLowerCase())}).map(function(e){return{heading:parseInt(e.tagName[1]),name:e.innerHTML,link:"#"+t.options.prefix+e.id}}),n=e.length,i=0;i<n;i++)this.appendChild(this.tocTree,e[i]);this.done=!0},get:function(){if(!this.done)throw new Error("mdtoc initialize failed");return this.tocTree},make:function(e){if(!this.done)throw new Error("mdtoc initialize failed");var t=document.createElement("ol");return t.id=this.options.prefix+this.options.name,this.appendChildren(t,this.tocTree.children,e),t},appendChild:function(e,t){var n=e.children;if(n.length<=0)n.push(Object.assign({},t,{children:[]}));else{var i=n[n.length-1];i.heading>=t.heading?n.push(Object.assign({},t,{children:[]})):this.appendChild(i,t)}},appendChildren:function(e,t,n){for(var i=t.length,r=0;r<i;r++){var o=t[r],d=document.createElement("li");if(n){var h=document.createElement("a");h.href=o.link,h.innerHTML=o.name,d.appendChild(h)}else d.setAttribute("data-link",o.link),d.innerHTML=o.name;if(0<o.children.length){var a=document.createElement("ol");d.appendChild(a),this.appendChildren(a,o.children,n)}e.appendChild(d)}}},function(e,t){return new i(e,t)}});
//# sourceMappingURL=mdtoc.min.js.map
